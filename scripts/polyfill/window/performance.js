// https://github.com/nicjansma/usertiming.js
!function(a){"use strict";"undefined"==typeof a&&(a={}),"undefined"==typeof a.performance&&(a.performance={}),a._perfRefForUserTimingPolyfill=a.performance,a.performance.userTimingJsNow=!1,a.performance.userTimingJsNowPrefixed=!1,a.performance.userTimingJsUserTiming=!1,a.performance.userTimingJsUserTimingPrefixed=!1,a.performance.userTimingJsPerformanceTimeline=!1,a.performance.userTimingJsPerformanceTimelinePrefixed=!1;var e,f,b=[],c=[],d=null;if("function"!=typeof a.performance.now){for(a.performance.userTimingJsNow=!0,c=["webkitNow","msNow","mozNow"],e=0;e<c.length;e++)if("function"==typeof a.performance[c[e]]){a.performance.now=a.performance[c[e]],a.performance.userTimingJsNowPrefixed=!0;break}var g=+new Date;a.performance.timing&&a.performance.timing.navigationStart&&(g=a.performance.timing.navigationStart),"function"!=typeof a.performance.now&&(Date.now?a.performance.now=function(){return Date.now()-g}:a.performance.now=function(){return+new Date-g})}var h=function(){},i=function(){},j=[],k=!1,l=!1;if("function"!=typeof a.performance.getEntries||"function"!=typeof a.performance.mark){for("function"==typeof a.performance.getEntries&&"function"!=typeof a.performance.mark&&(l=!0),a.performance.userTimingJsPerformanceTimeline=!0,b=["webkit","moz"],c=["getEntries","getEntriesByName","getEntriesByType"],e=0;e<c.length;e++)for(f=0;f<b.length;f++)d=b[f]+c[e].substr(0,1).toUpperCase()+c[e].substr(1),"function"==typeof a.performance[d]&&(a.performance[c[e]]=a.performance[d],a.performance.userTimingJsPerformanceTimelinePrefixed=!0);h=function(a){j.push(a),"measure"===a.entryType&&(k=!0)};var m=function(){k&&(j.sort(function(a,b){return a.startTime-b.startTime}),k=!1)};if(i=function(a,b){for(e=0;e<j.length;)j[e].entryType===a&&("undefined"==typeof b||j[e].name===b)?j.splice(e,1):e++},"function"!=typeof a.performance.getEntries||l){var n=a.performance.getEntries;a.performance.getEntries=function(){m();var b=j.slice(0);return l&&n&&(Array.prototype.push.apply(b,n.call(a.performance)),b.sort(function(a,b){return a.startTime-b.startTime})),b}}if("function"!=typeof a.performance.getEntriesByType||l){var o=a.performance.getEntriesByType;a.performance.getEntriesByType=function(b){if("undefined"==typeof b||"mark"!==b&&"measure"!==b)return l&&o?o.call(a.performance,b):[];"measure"===b&&m();var c=[];for(e=0;e<j.length;e++)j[e].entryType===b&&c.push(j[e]);return c}}if("function"!=typeof a.performance.getEntriesByName||l){var p=a.performance.getEntriesByName;a.performance.getEntriesByName=function(b,c){if(c&&"mark"!==c&&"measure"!==c)return l&&p?p.call(a.performance,b,c):[];"undefined"!=typeof c&&"measure"===c&&m();var d=[];for(e=0;e<j.length;e++)("undefined"==typeof c||j[e].entryType===c)&&j[e].name===b&&d.push(j[e]);return l&&p&&(Array.prototype.push.apply(d,p.call(a.performance,b,c)),d.sort(function(a,b){return a.startTime-b.startTime})),d}}}if("function"!=typeof a.performance.mark){for(a.performance.userTimingJsUserTiming=!0,b=["webkit","moz","ms"],c=["mark","measure","clearMarks","clearMeasures"],e=0;e<c.length;e++)for(f=0;f<b.length;f++)d=b[f]+c[e].substr(0,1).toUpperCase()+c[e].substr(1),"function"==typeof a.performance[d]&&(a.performance[c[e]]=a.performance[d],a.performance.userTimingJsUserTimingPrefixed=!0);var q={};"function"!=typeof a.performance.mark&&(a.performance.mark=function(b){var c=a.performance.now();if("undefined"==typeof b)throw new SyntaxError("Mark name must be specified");if(a.performance.timing&&b in a.performance.timing)throw new SyntaxError("Mark name is not allowed");q[b]||(q[b]=[]),q[b].push(c),h({entryType:"mark",name:b,startTime:c,duration:0})}),"function"!=typeof a.performance.clearMarks&&(a.performance.clearMarks=function(a){a?q[a]=[]:q={},i("mark",a)}),"function"!=typeof a.performance.measure&&(a.performance.measure=function(b,c,d){var e=a.performance.now();if("undefined"==typeof b)throw new SyntaxError("Measure must be specified");if(!c)return void h({entryType:"measure",name:b,startTime:0,duration:e});var f=0;if(a.performance.timing&&c in a.performance.timing){if("navigationStart"!==c&&0===a.performance.timing[c])throw new Error(c+" has a timing of 0");f=a.performance.timing[c]-a.performance.timing.navigationStart}else{if(!(c in q))throw new Error(c+" mark not found");f=q[c][q[c].length-1]}var g=e;if(d)if(g=0,a.performance.timing&&d in a.performance.timing){if("navigationStart"!==d&&0===a.performance.timing[d])throw new Error(d+" has a timing of 0");g=a.performance.timing[d]-a.performance.timing.navigationStart}else{if(!(d in q))throw new Error(d+" mark not found");g=q[d][q[d].length-1]}var i=g-f;h({entryType:"measure",name:b,startTime:f,duration:i})}),"function"!=typeof a.performance.clearMeasures&&(a.performance.clearMeasures=function(a){i("measure",a)})}"function"==typeof define&&define.amd?define([],function(){return a.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=a.performance)}("undefined"!=typeof window?window:void 0);